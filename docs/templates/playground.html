<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playground - {{ config.title }}</title>
    <link rel="stylesheet" href="/oat.min.css">
    <script>
        (function() {
            var t = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
            document.documentElement.setAttribute('data-theme', t);
        })();
    </script>
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        header {
            border-bottom: 1px solid var(--border);
            padding: var(--space-2) var(--space-4);
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 50px;
        }

        .split-view {
            display: flex;
            flex: 1;
            height: calc(100vh - 50px);
        }

        .editor-pane, .preview-pane {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .editor-pane {
            border-right: 1px solid var(--border);
        }

        textarea#editor {
            flex: 1;
            width: 100%;
            border: none;
            padding: var(--space-4);
            font-family: monospace;
            font-size: 14px;
            line-height: 1.5;
            resize: none;
            outline: none;
            background: var(--background);
            color: var(--foreground);
        }

        .pane-header {
            padding: var(--space-2) var(--space-4);
            background: var(--muted);
            border-bottom: 1px solid var(--border);
            font-size: var(--text-7);
            font-weight: bold;
            color: var(--muted-foreground);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #preview-container {
            padding: var(--space-4);
            overflow: auto;
            flex: 1;
        }
        
        @media (max-width: 768px) {
            .split-view {
                flex-direction: column;
            }
            .editor-pane {
                border-right: none;
                border-bottom: 1px solid var(--border);
                height: 50%;
            }
        }
    </style>
</head>
<body>

<header>
    <div style="display: flex; align-items: center; gap: var(--space-2);">
        <a href="/" style="display: flex; align-items: center;">
            <img src="/logo.svg" alt="Oat" style="height: 24px;">
        </a>
        <span style="color: var(--muted-foreground);">/</span>
        <strong>Playground</strong>
    </div>
    <div>
        <a href="/" class="button small outline">Back to Docs</a>
    </div>
</header>

<div class="split-view">
    <div class="editor-pane">
        <div class="pane-header">
            <span>HTML Code</span>
            <button class="small outline" id="reset-btn">Reset</button>
        </div>
        <textarea id="editor" spellcheck="false" placeholder="Enter your HTML here..."></textarea>
    </div>
    <div class="preview-pane">
        <div class="pane-header">Preview</div>
        <div id="preview-container"></div>
    </div>
</div>

<script>
    const editor = document.getElementById('editor');
    const preview = document.getElementById('preview-container');
    const resetBtn = document.getElementById('reset-btn');
    const defaultCode = `<!-- Welcome to the Oat Playground! -->
<div class="card">
  <h3>Hello, World!</h3>
  <p>Edit this code to see live changes.</p>
  <button>Click Me</button>
</div>`;

    const params = new URLSearchParams(window.location.search);
    const initialCode = params.get('code') || defaultCode;

    editor.value = initialCode;
    updatePreview(initialCode);

    editor.addEventListener('input', () => {
        updatePreview(editor.value);
    });

    resetBtn.addEventListener('click', () => {
        editor.value = initialCode;
        updatePreview(initialCode);
    });

    function updatePreview(html) {
        preview.innerHTML = html;
    }
    
</script>

</body>
</html>
